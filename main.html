<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <link rel="icon" href="/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#000000" />
  <title>main</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway%3A500%2C600"/>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro%3A400%2C500%2C600"/>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins%3A400"/>
  <link rel="stylesheet" href="./styles/main.css"/>
</head>
<body>

<!-- main -->
<div class="main-fxQ">
  <div class="background-5FS">
    <div class="i-mu-nn-button-Csn">
      <img class="icon-mu-fFa" src="./assets/icon-mu.png"/>
    </div>

    <!-- My promt and promt name -->
    <p class="my-prompt-XHn">My Prompt</p>
    <p class="untitled-prompt-aG4">Untitled Prompt</p>

    <!-- chatbot 1 -->
    <div class="chatbot-1-dVE">
      <div class="auto-group-gj1k-iWg">
        <div class="ava-chatbot-1-21a"></div>
        <p class="this-line-is-a-comment-it-wont-be-copied-to-the-clipboard-or-sent-to-chatgpt-w8Y">This line is a comment, it won&#39;t be copied to the clipboard or sent to ChatGPT.</p>
      </div>

      <!-- functions in chatbot 1-->
      <div class="auto-group-fs7x-owS">
        <button class="rate-1-jKJ">Rate</button>
        <button class="sum-up-1-8MS">Sum up</button>
        <button class="copy-1-BKi" id="copyButton">
          <img class="fluent-copy-20-regular-4PW" src="./assets/fluent-copy-20-regular.png" />
          <p class="copy-MtQ">Copy</p>
        </button>
        <button class="text-to-speech-1-Ldr" id="textToSpeechButton">
          <img class="snapedit1705041549773-1-GXW" src="./assets/snapedit1705041549773-1-D1E.png" />
        </button>
      </div>
    </div>
    <div class="user-1-3wa">
      <div class="ellipse-2-wXA">
      </div>
      <p class="write-me-a-joke-about-bLp">Write me a joke about</p>

      

    </div>
    <div class="chat-bot-2-JW8">
      <div class="auto-group-bbr6-19e">
        <div class="ava-chatbot-2-Xdn"></div>
        <p class="the-subject-below-is-a-variable-after-saving-your-prompt-its-value-anything-after-the-equals-sign-will-be-cleared-when-you-close-or-refresh-the-page-eCc">The subject below is a variable. After saving your prompt, its value (anything after the equals sign) will be cleared when you close or refresh the page.</p>
      </div>
      <div class="auto-group-pubt-hRn">
        <button class="rate-2-CtL">Rate</button>
        <button class="sum-up-2-SGt">Sum up</button>
        <button class="text-to-speech-2-afv">
          <img class="snapedit1705041549773-1-VXz" src="./assets/snapedit1705041549773-1.png" />
        </button>
      </div>
    </div>
    <div class="user-2-MaC">
      <div class="ellipse-2-Mic">
      </div>
      <p class="airplane-food-qdn">airplane food</p>
    </div>

    <div class="enter--wB2" id="chat-container">
      <input type="text" id="user-input" placeholder="Type your message...">
      <img class="vector-4ex" src="./assets/vector.png"/>
    </div>

  </div>
  <div class="menu-and-feature-XYY">
    <p class="menu-1Ti">Menu</p>
    <div class="new-promt-pAG">New Prompt</div>
    <p class="feature-cbv">Feature</p>
    <div class="sum-up-history-WSQ">
      <div class="rectangle-2992-FPz">
      </div>
      <p class="sum-up-history-aSG">Sum up History</p>
    </div>
  </div>
</div>
<script>
  let curren_text = ''
  function sendMessage() {
      var userInput = document.getElementById('user-input').value;
      document.getElementById('user-input').value = '';

      var chatContainer = document.getElementById('chat-container');
      var userMessage = document.createElement('p');
      userMessage.innerHTML = '<strong>You:</strong> ' + userInput;
      chatContainer.appendChild(userMessage);

      fetch('/get_response', {
          method: 'POST',
          headers: {
              'Content-Type': 'application/x-www-form-urlencoded',
          },
          body: 'user_input=' + encodeURIComponent(userInput),
      })
      .then(response => response.text())
      .then(data => {
          console.log(data);
          curren_text = JSON.parse(data)['response'];
          var botMessage = document.createElement('p');
          botMessage.innerHTML = '<strong>ChatBot:</strong> ' + JSON.parse(data)['response'];
          chatContainer.appendChild(botMessage);
      });
  }
  function copy(){
    var textToCopy = curren_text;
    var textarea = document.createElement("textarea");
    textarea.value = textToCopy;
    document.body.appendChild(textarea);
    textarea.select();
    document.execCommand('copy');
    document.body.removeChild(textarea);
    alert("Text copied to clipboard: " + textToCopy);
  }
    function text_to_speech(){
        var text=curren_text;
        fetch('/text_to_speech', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: 'user_input=' + encodeURIComponent(userInput),
            })
            .then(response => response.json())
            .then(data => {
                // Hiển thị kết quả từ Flask
                document.getElementById('result').innerText = 'Response from Python: ' + data.response;
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }
    

  document.getElementById("copyButton").addEventListener("click", function () {
        // Call the copy function or include the copying logic directly here
        copy();
    });
  document.getElementById("textToSpeechButton").addEventListener("click", function () {
        // Call the copy function or include the copying logic directly here
        text_to_speech();
    });



</script>


</body>